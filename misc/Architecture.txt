
                    Notes sur l'architecture générale du logiciel
                   ============================

Hierarchie Zope:

Cette hiérarche est crée par ZScoDoc. Normalement, il n'y a jamais besoin d'utiliser la ZMI de Zope.

ScoDoc (ZScoDoc instance)
   icons/ (folder, (re)créé par build_icons_folder)
   UsersDB   (cnx db utilisateurs)
   acl_users (exUserFolder)
   Dept1/  (folder)   <== pour le département d'id Dept1
	Fotos/ (folder)
        Scolarite (ZScolar instance)
            DB (cnx db notes)
            Notes (ZNotes instance)
            Absences
            Entreprises
            Users (ZScoUsers instance)
   Dept2/
        ...


Bases de données
===========

En ScoDoc 6, les BD crées par défaut appartiennent à www-data qui peut donc y accéder sans mot de passe.
Ce comportement peut être changé: il suffit de suivre et adapter les étapes du script create_dept.sh
le fichier depts/DEPT.cfg doit contenir la chaine de connexion pour la BD de ce département. 

La base SCOUSERS est partagée par tous les départements.

Fonctionnement de l'installeur
===================

Le scrit d'install install_debian4.sh configure les logiciels nécessaires.
Vous pouvez l'adapter à votre situation.

L'image Zope standard (Data.fs) contient juste une instance vide de ScoDoc.
(pour repartir d'une autre image Zope, ajouter une instance de ScoDoc à la racine, puis y accéder
au moins une fois en tant qu'admin (view): c'est en effet lors de la première visite que sont créés les 
sous-objets).

Les méthodes de l'objet ScoDoc (ZScoDoc.py) se chargent d'ajouter les objets nécessaires suivant 
les départements créés.

Lors de la création d'un département dans Zope, on crée 3 rôles (EnsXXX, SecrXXX, AdminXXX) 
et on ajuste les permissions. Ces permissions peuvent être modifiées (via la ZMI) ensuite.


